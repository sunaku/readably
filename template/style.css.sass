$golden_ratio: 1.618
$size_of_text: $golden_ratio * 1em
$size_of_glow: $golden_ratio * 2em
$animate_time: $golden_ratio * 1s

// taken from the Gruvbox colorscheme palette
// https://github.com/morhetz/gruvbox#palette
$all_bg_color: #32302f // dark0_soft
$border_color: #504945 // dark2
$all_fg_color: #d5c4a1 // light2
$header_color: #fabd2f // bright_yellow
$subtle_color: #83a598 // bright_blue
$a_link_color: #8ec07c // bright_aqua
$a_seen_color: #d3869b // bright_purple
$target_color: #fabd2f // bright_yellow
$emboss_color: #b8bb26 // bright_green
$pretty_color: #fe8019 // bright_orange

=icon_wave
  content: '\224B' // &apid;

=icon_star_outline
  content: '\2606' // &star;

=icon_star_filled
  content: '\2605' // &starf;

=navigation_icon
  float: right
  font-size: $size_of_text
  text-decoration: none

=you_are_here
  color: $target_color
  font-weight: bolder

  &:before
    +navigation_icon
    +icon_star_filled
    // animate the icon for wayfinding
    transform: rotateY(360deg)
    transition: transform $animate_time

=diminish
  font-size: smaller
  line-height: initial

@media screen

  body
    color: $all_fg_color
    background-color: $all_bg_color
    text-shadow: 0 0 $size_of_glow
    line-height: $size_of_text
    font-family: 'Ubuntu Mono', Monaco, Consolas, Terminal, monospace

  ::selection
    background-color: $pretty_color

  article#body
    margin: auto
    max-width: 80ch
    text-align: justify

    > hr
      visibility: hidden

    > header, > footer
      text-align: center

    > header
      margin-bottom: 2em

      > .navigation
        margin-top: 1em
        font-size: $size_of_text

        > a
          margin: 0.25em
          text-decoration: none
          border-bottom: none

          &:not([href])
            visibility: hidden

          &.rootlink
            &:before
              +icon_wave
            > span
              display: none

      > .title > a.feed > img
        display: inline

      > .author, .date
        +diminish

    > footer
      +diminish

    .category, .credits
      color: $subtle_color

    > .content

      .table-of-contents
        box-shadow: inset 0 0 $size_of_glow $border_color
        padding: 1.5em
        padding-left: 3em
        padding-right: 0
        margin-bottom: 2em

      h1, h2, h3, h4, h5, h6
        margin-top: 2em

      p + p
        text-indent: 2em

      img, video, audio, embed, iframe
        box-shadow: 0 0 $size_of_glow $subtle_color

    > nav.entries > ul > li
      margin-top: 1em
      // when user follows link to index page from an entry
      // they are placed at its location in the entry list
      &:target > .title > a
        +you_are_here

  h1, h2, h3, h4, h5, h6, th
    color: $header_color
    line-height: $size_of_text

  img, video, audio, embed, iframe
    margin: auto
    display: block
    // fit media elements within their parent container
    // http://unstoppablerobotninja.com/entry/fluid-images
    max-width: 100%
    max-height: 100%

  blockquote
    color: $subtle_color
    font-style: italic
    text-align: center

  dt, strong, em, b, i, u
    color: $emboss_color

  code
    color: $pretty_color
    font-weight: bolder

  pre
    padding: 1em
    line-height: initial

    code
      color: inherit
      font-weight: inherit

      // comments
      span.c, span.c1, span.cm
        font-style: inherit !important
        color: $emboss_color !important

  ol > li
    list-style-type: decimal

    ol > li
      list-style-type: lower-alpha

      ol > li
        list-style-type: lower-roman

        ol > li
          list-style-type: upper-alpha

          ol > li
            list-style-type: upper-roman

            ol > li
              list-style-type: lower-greek

  table
    margin: auto
    border-collapse: collapse

    tr
      border-bottom: thin solid $border_color

      th, td
        margin: none
        padding: 0.5em
        text-align: center

  a
    img
      border: none

    // dashed-underline for links within this website
    &[href]:not([href^='#'])
      border-bottom: thin dashed

    // double-underline for links leaving this website
    &[href][href*='://']
      border-bottom: thin solid

    &:link
      color: $a_link_color

    &:visited
      color: $a_seen_color

    &:hover
      color: $target_color

    &.uplink, &.permalink
      +navigation_icon

    &.permalink:before
      +icon_star_outline

    &.downlink:target
      +you_are_here

  // reveal uplink and embellish permalink on target
  *:target > a
    &.uplink:before
      +icon_wave

    &.permalink
      +you_are_here

@media print

  article#body
    header
      text-align: center
    hr, .navigation, a.uplink, a.permalink, .comments, footer
      display: none

  a
    text-decoration: none
    // show destination URL for external hyperlinks
    &[href]:not([href^='#']):after
      content: ' ' attr(href) ' '
      font-family: monospace
