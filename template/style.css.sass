$column_width: 26em
$column_space: 0
$column_count: auto

@import url('https://fonts.googleapis.com/css?family=Comfortaa|Molengo|Ubuntu+Mono|Delius')
$heading_font: Comfortaa, Constantia, Palatino, serif
$content_font: Molengo, Calibri, Helvetica, sans-serif
$literal_font: 'Ubuntu Mono', Monaco, Consolas, Fixedsys, monospace
$quoting_font: Delius, Constantia, Palatino, serif

// colors from zenburn.vim theme
$color-aside           : #9f9f9f  // Pmenu
$color-aside-bg        : #2c2e2e  // Pmenu
$color-blockquote      : #ffcfaf  // Define
$color-body-bg         : #3f3f3f  // Normal
$color-body            : #dcdccc  // Normal
$color-category        : #7f9f7f  // Comment
$color-code            : #dca3a3  // Boolean
$color-del             : #333333  // VisualNOS
$color-del-bg          : #f18c96  // VisualNOS
$color-em              : #dfdfbf  // Type
$color-heading         : #ccdc90  // StatusLine
$color-ins-bg          : #385f38  // IncSearch
$color-ins             : #f8f893  // IncSearch
$color-link            : #8cd0d3  // Number
$color-nav-bg-hover    : #434443  // CursorLine
$color-nav-bg-target   : #4f4f4f  // CursorColumn
$color-pre             : #9fafaf  // SignColumn
$color-pre-bg          : #343434  // SignColumn
$color-scroll-hint     : #484848  // ColorColumn
$color-strong          : #efef8f  // Function
$color-table-border    : #5b605e  // NonText
$color-table-header    : #88b090  // StatusLineNC
$color-table-header-bg : #2e3330  // StatusLineNC
$color-update          : #d0d0a0  // PmenuSel

=heading_style
  font-family: $heading_font
  font-weight: normal
  line-height: 140%
  text-shadow: 0 0 20px black

=content_style
  font-family: $content_font
  line-height: 155%
  font-size: 125%

=literal_style
  font-family: $literal_font
  line-height: normal

=quoting_style
  font-family: $quoting_font

=center_text
  display: block
  text-align: center

=center_elem
  display: block
  margin: auto

=bubble_border
  display: block
  border-radius: 1em
  -moz-border-radius: 1em
  -webkit-border-radius: 1em
  padding: 0.75em 1em 0.75em 1em

=scroll_arrow
  position: fixed
  z-index: -1
  top: 45%
  font-size: 1250%
  font-weight: bolder
  color: $color-scroll-hint

@media all
  body
    +content_style
    margin: 2em

  h1, h2, h3, h4, h5, h6
    +heading_style

  pre, code, samp, kbd, tt
    +literal_style
    font-size: medium

  img, video, audio, embed, iframe
    +center_elem

  blockquote, q
    +quoting_style

  a > img
    border: none
    cursor: pointer

  #body
    display: block
    text-align: justify

    .category
      color: $color-category

    > header
      +center_text
      clear: both
      margin-bottom: 2em

      > a.index:first-child
        +heading_style
        font-size: xx-large

      > .title > a.feed > img
        display: inline

      > .category
        margin-top: 1em

    > .description
      +center_text

    > form.search
      +center_text
      margin-bottom: 2em

    > nav.entries > table
      width: 100%
      border: none
      border-collapse: collapse

      td
        border: none
        padding-top: 0.5em
        padding-bottom: 1.5em

      td.title
        text-align: left
        padding-right: 2em

      td.date
        text-align: right
        white-space: nowrap
        vertical-align: top

    > .content
      table
        border-collapse: collapse

        &, th, td
          border: thin solid $color-table-border
          padding: 0.5em

        th
          text-align: center
          color: $color-table-header
          background-color: $color-table-header-bg

      h1, h2, h3, h4, h5, h6
        margin-top: 2em
        text-align: left

    > .comments
      margin-top: 3em

    > footer
      +center_text
      margin-top: 2em

      > p
        font-size: smaller

        &.copyright
          margin-bottom: 0

        &.credits
          margin-top: 0

// only apply columns on high resolution displays
@media only screen and (min-device-width: 1024px)
  html, body
    height: 96%
    margin: 1%
    padding: 0

  body
    $column_color: $color-table-border
    $column_ruler: "thin" "solid" $column_color

    &:before
      +scroll_arrow
      content: '<'
      left: 0

    &:after
      +scroll_arrow
      content: '>'
      right: 0.5%

    column:
      count: $column_count
      width: $column_width
      gap:   $column_space
      rule:  $column_ruler

    -moz-column:
      count: $column_count
      width: $column_width
      gap:   $column_space
      rule:  $column_ruler

    -webkit-column:
      count: $column_count
      width: $column_width
      gap:   $column_space
      rule:  $column_ruler

@media screen
  body
    color: $color-body
    background-color: $color-body-bg

  #body
    +center_elem
    max-width: $column_width

    > nav.entries > table tr
      -webkit-column-break-inside: avoid
      -moz-column-break-inside: avoid
      column-break-inside: avoid

      &:hover
        background-color: $color-nav-bg-hover

      &:target
        background-color: $color-nav-bg-target

    > .content aside
      +bubble_border
      color: $color-aside
      background-color: $color-aside-bg

    > aside.update > dl > dt.title
      font-weight: bold
      color: $color-update

    > #updates, > #comments
      -webkit-column-break-before: always
      -moz-column-break-before: always
      column-break-before: always

  h1, h2, h3, h4, h5, h6
    color: $color-heading

    a.permalink
      float: left
      margin-left: -1em
      opacity: 0.25

    a.permalink:before
      content: '\2665' // &hearts;

    a.permalink:hover, &:target a.permalink
      opacity: initial

  hr
    border: thin solid $color-table-border

    &.hidden
      display: none

  img, video, audio, embed, iframe
    // fit media elements within their parent container
    // http://unstoppablerobotninja.com/entry/fluid-images
    max-width: 100%

  // intense.js wraps the zoomed-in image inside <figure>
  figure > img
    cursor: initial
    max-width: initial

  a
    text-decoration: none
    font-weight: bold
    color: $color-link

    &:hover
      text-decoration: underline

  em, i, var
    font-weight: bolder
    color: $color-em

  strong, b
    color: $color-strong

  ins
    color: $color-ins
    background-color: $color-ins-bg

  del
    color: $color-del
    background-color: $color-del-bg

  blockquote, q
    color: $color-blockquote

  code, samp, tt
    color: $color-code

  kbd
    border-style: outset
    padding: 2px
    color: black
    background-color: silver

  pre
    +bubble_border
    +literal_style
    overflow: auto
    white-space: pre-wrap

    &::-webkit-scrollbar
      width: 1ex
      height: 1ex

    &::-webkit-scrollbar-track
      margin: 1ex

    &::-webkit-scrollbar-thumb
      -webkit-border-radius: 1ex
      background: rgba(0, 0, 0, .25)

      &:hover
        background: rgba(0, 0, 0, .55)

    &::-webkit-scrollbar-corner
      display: none

    // Markdown renders 4-space indented blocks as <pre><code>
    // however, I want to treat them as pure <pre> blocks only!
    &, & > code:only-child
      color: $color-pre
      background-color: $color-pre-bg !important

  // styling for IntenseDebate comments
  // http://support.intensedebate.com/css-documentation/
  #idc-container-parent #idc-container
    // increase font size
    &, & div
      font-size: large

    // make dates visible
    .idc-thread_active, .idc-time > a
      color: $color-heading

    // fix for strong colors being applied to
    // IntenseDebate comment form submit link
    .idc-r strong
      color: inherit

    // restore padding and margin for <pre>
    .idc-c-t-inner pre
      +bubble_border

@media print
  blockquote, q
    font-style: italic

  #body
    > header > a.index,
    > .comments,
    > footer
      display: none

  // show destination URL for external hyperlinks
  a[href]:not([href^='#']):after
    content: ' ' attr(href)
    +literal_style
