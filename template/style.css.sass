$golden_ratio: 1.6180339887

// taken from the Gruvbox colorscheme palette
// https://github.com/morhetz/gruvbox#palette
$all_bg_color: #32302f // dark0_soft
$border_color: #504945 // dark2
$all_fg_color: #d5c4a1 // light2
$header_color: #fabd2f // bright_yellow
$subtle_color: #83a598 // bright_blue
$a_link_color: #8ec07c // bright_aqua
$a_seen_color: #d3869b // bright_purple
$target_color: #fabd2f // bright_yellow
$emboss_color: #b8bb26 // bright_green
$pretty_color: #fe8019 // bright_orange

$base_font_size: 1vmax * $golden_ratio
$base_anim_time: 1s * $golden_ratio

=icon_wave
  content: '\224B' // &apid;

=icon_star_outline
  content: '\2606' // &star;

=icon_star_filled
  content: '\2605' // &starf;

=navigation_icon
  float: right
  font-size: 4 * $base_font_size
  text-decoration: none

=you_are_here
  color: $target_color
  font-weight: bolder

  &:before
    +navigation_icon
    +icon_star_filled
    // animate the icon for wayfinding
    transform: rotateY(360deg)
    transition: transform $base_anim_time

@media screen

  body
    color: $all_fg_color
    background-color: $all_bg_color
    text-shadow: 0 0 (1em * $golden_ratio)
    line-height: 150%
    font-family: monospace
    font-size: $base_font_size

  article#body
    margin: auto
    max-width: 80ch
    text-align: justify

    > hr
      visibility: hidden

    > header, > footer
      text-align: center

    > header
      margin-bottom: 2em

      > .title

        a.feed > img
          display: inline

        .navigation
          margin-bottom: 0.5em

          a
            margin: 0.25em
            text-decoration: none

            &:not([href])
              visibility: hidden

            &.rootlink:before
              +icon_wave

    .category, .credits
      color: $subtle_color

    > .content

      .table-of-contents
        border: thick dashed $border_color
        padding: 1.5em
        padding-left: 3em
        padding-right: 0
        margin-bottom: 2em

      h1, h2, h3, h4, h5, h6
        margin-top: 2em

      p + p
        text-indent: 2em

    > nav.entries > ul > li
      margin-top: 1em
      // when user follows link to index page from an entry
      // they are placed at its location in the entry list
      &:target > .title > a
        +you_are_here

  h1, h2, h3, h4, h5, h6, th
    color: $header_color
    line-height: 150%

  h1
    font-size: 2.0 * $base_font_size

  h2
    font-size: 1.8 * $base_font_size

  h3
    font-size: 1.6 * $base_font_size

  h4
    font-size: 1.4 * $base_font_size

  h5
    font-size: 1.2 * $base_font_size

  h6
    font-size: 1.0 * $base_font_size

  img, video, audio, embed, iframe
    margin: auto
    display: block
    // fit media elements within their parent container
    // http://unstoppablerobotninja.com/entry/fluid-images
    max-width: 100%
    max-height: 100%

  blockquote
    color: $subtle_color
    font-size: 1.25 * $base_font_size
    font-style: italic
    text-align: center
    line-height: 150%

  dt, strong, em, b, i, u
    color: $emboss_color

  code
    color: $pretty_color
    font-weight: bolder

  pre
    padding: 1em
    line-height: 100%

    code
      color: inherit
      font-weight: inherit

  ol > li
    list-style-type: decimal

    ol > li
      list-style-type: lower-alpha

      ol > li
        list-style-type: lower-roman

        ol > li
          list-style-type: upper-alpha

          ol > li
            list-style-type: upper-roman

            ol > li
              list-style-type: lower-greek

  table
    margin: auto
    border-collapse: collapse

    tr
      border-bottom: thin solid $border_color

      th, td
        margin: none
        padding: 0.5em
        text-align: center

  a
    img
      border: none

    &:link
      color: $a_link_color

    &:visited
      color: $a_seen_color

    &:hover
      color: $target_color

    &.uplink, &.permalink
      +navigation_icon

    &.permalink:before
      +icon_star_outline

    &.downlink:target
      +you_are_here

  // reveal uplink and embellish permalink on target
  *:target > a
    &.uplink:before
      +icon_wave

    &.permalink
      +you_are_here

  // http://support.intensedebate.com/css-documentation/
  #idc-container-parent #idc-container
    &, & div
      // use same font size as the rest of the web page
      font-size: inherit

@media print

  article#body
    header
      text-align: center
    hr, .navigation, a.uplink, a.permalink, .comments, footer
      display: none

  a
    text-decoration: none
    // show destination URL for external hyperlinks
    &[href]:not([href^='#']):after
      content: ' ' attr(href) ' '
      font-family: monospace
